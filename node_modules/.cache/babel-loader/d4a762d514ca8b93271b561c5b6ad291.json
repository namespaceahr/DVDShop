{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\habib\\\\Downloads\\\\Archive\\\\React\\\\dvdshop\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\habib\\\\Downloads\\\\Archive\\\\React\\\\dvdshop\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\habib\\\\Downloads\\\\Archive\\\\React\\\\dvdshop\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\habib\\\\Downloads\\\\Archive\\\\React\\\\dvdshop\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\habib\\\\Downloads\\\\Archive\\\\React\\\\dvdshop\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import'./App.css';import fire from'./config';import{Link}from'react-router-dom';import SignIn from'./SignIn';import Dashboard from'./Dashboard';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.onCollectionUpdate=function(querySnapshot){var list=[];querySnapshot.forEach(function(obj){var _obj$data=obj.data(),title=_obj$data.title,description=_obj$data.description,price=_obj$data.price;list.push({key:obj.id,obj:obj,title:title,description:description,price:price});});_this.setState({list:list});};_this.ref=fire.firestore().collection('list');_this.unsubscribe=null;_this.state={user:{},list:[]};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.authListener();this.unsubscribe=this.ref.onSnapshot(this.onCollectionUpdate);}},{key:\"authListener\",value:function authListener(){var _this2=this;fire.auth().onAuthStateChanged(function(user){if(user){_this2.setState({user:user});}else{_this2.setState({user:null});}});}},{key:\"render\",value:function render(){if(this.state.user&&fire.auth().currentUser){//return (<Dashboard/>);\nreturn React.createElement(\"div\",null,React.createElement(Dashboard,null),React.createElement(\"div\",null,React.createElement(\"h3\",{className:\"header\"},\"DVD LIST\")),React.createElement(\"div\",null,React.createElement(\"h4\",null,React.createElement(Link,{to:\"/add\"},\"Add New DVD\")),React.createElement(\"table\",{class:\"table\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Title\"),React.createElement(\"th\",null,\"Description\"),React.createElement(\"th\",null,\"Price\"))),React.createElement(\"tbody\",null,this.state.list.map(function(dvd){return React.createElement(\"tr\",null,React.createElement(\"td\",null,React.createElement(Link,{to:\"/details/\".concat(dvd.key)},dvd.title)),React.createElement(\"td\",null,dvd.description),React.createElement(\"td\",null,dvd.price));})))));}return React.createElement(SignIn,null);}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/habib/Downloads/Archive/React/dvdshop/src/App.js"],"names":["React","Component","fire","Link","SignIn","Dashboard","App","props","onCollectionUpdate","querySnapshot","list","forEach","obj","data","title","description","price","push","key","id","setState","ref","firestore","collection","unsubscribe","state","user","authListener","onSnapshot","auth","onAuthStateChanged","currentUser","map","dvd"],"mappings":"gsBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,UAAjB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,C,GACMC,CAAAA,G,6DACJ,aAAYC,KAAZ,CACA,qCACE,qEAAMA,KAAN,GADF,MASAC,kBATA,CASqB,SAACC,aAAD,CAAmB,CACtC,GAAMC,CAAAA,IAAI,CAAG,EAAb,CACAD,aAAa,CAACE,OAAd,CAAsB,SAACC,GAAD,CAAS,eACSA,GAAG,CAACC,IAAJ,EADT,CACrBC,KADqB,WACrBA,KADqB,CACdC,WADc,WACdA,WADc,CACDC,KADC,WACDA,KADC,CAE7BN,IAAI,CAACO,IAAL,CAAU,CACRC,GAAG,CAAEN,GAAG,CAACO,EADD,CAERP,GAAG,CAAHA,GAFQ,CAGRE,KAAK,CAALA,KAHQ,CAIRC,WAAW,CAAXA,WAJQ,CAKRC,KAAK,CAALA,KALQ,CAAV,EAOD,CATD,EAUA,MAAKI,QAAL,CAAc,CACZV,IAAI,CAAJA,IADY,CAAd,EAGD,CAxBD,CAEE,MAAKW,GAAL,CAAWnB,IAAI,CAACoB,SAAL,GAAiBC,UAAjB,CAA4B,MAA5B,CAAX,CACA,MAAKC,WAAL,CAAmB,IAAnB,CACA,MAAKC,KAAL,CAAW,CACTC,IAAI,CAAG,EADE,CAEThB,IAAI,CAAG,EAFE,CAAX,CAJF,aAQC,C,6EAoBD,CACE,KAAKiB,YAAL,GACA,KAAKH,WAAL,CAAmB,KAAKH,GAAL,CAASO,UAAT,CAAoB,KAAKpB,kBAAzB,CAAnB,CACD,C,mDACa,iBACZN,IAAI,CAAC2B,IAAL,GAAYC,kBAAZ,CAA+B,SAACJ,IAAD,CAAQ,CACrC,GAAGA,IAAH,CACA,CACE,MAAI,CAACN,QAAL,CAAc,CAACM,IAAI,CAAJA,IAAD,CAAd,EACD,CAHD,IAII,CACF,MAAI,CAACN,QAAL,CAAc,CAACM,IAAI,CAAG,IAAR,CAAd,EACD,CACF,CARD,EASD,C,uCAEO,CACN,GAAI,KAAKD,KAAL,CAAWC,IAAX,EAAmBxB,IAAI,CAAC2B,IAAL,GAAYE,WAAnC,CAAgD,CAC5C;AACA,MACA,gCACE,oBAAC,SAAD,MADF,CAEE,+BACE,0BAAI,SAAS,CAAC,QAAd,aADF,CAFF,CAOE,+BACE,8BAAI,oBAAC,IAAD,EAAM,EAAE,CAAC,MAAT,gBAAJ,CADF,CAEE,6BAAO,KAAK,CAAC,OAAb,EACE,iCACE,8BACE,sCADF,CAEE,4CAFF,CAGE,sCAHF,CADF,CADF,CAQE,iCACG,KAAKN,KAAL,CAAWf,IAAX,CAAgBsB,GAAhB,CAAoB,SAAAC,GAAG,QACtB,+BACE,8BAAI,oBAAC,IAAD,EAAM,EAAE,oBAAcA,GAAG,CAACf,GAAlB,CAAR,EAAkCe,GAAG,CAACnB,KAAtC,CAAJ,CADF,CAEE,8BAAKmB,GAAG,CAAClB,WAAT,CAFF,CAGE,8BAAKkB,GAAG,CAACjB,KAAT,CAHF,CADsB,EAAvB,CADH,CARF,CAFF,CAPF,CADA,CA+BH,CACD,MACE,qBAAC,MAAD,MADF,CAGH,C,iBApFiBf,S,EAuFlB,cAAeK,CAAAA,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport fire from './config';\nimport { Link } from 'react-router-dom';\nimport SignIn from './SignIn'\nimport Dashboard from './Dashboard';\nclass App extends Component{\n  constructor(props)\n  {\n    super(props);\n    this.ref = fire.firestore().collection('list');\n    this.unsubscribe = null;\n    this.state={\n      user : {},\n      list : []\n    }\n  }\n  onCollectionUpdate = (querySnapshot) => {\n    const list = [];\n    querySnapshot.forEach((obj) => {\n      const { title, description, price } = obj.data();\n      list.push({\n        key: obj.id,\n        obj, \n        title,\n        description,\n        price,\n      });\n    });\n    this.setState({\n      list\n   });\n  }\n\n\n  componentDidMount()\n  {\n    this.authListener();\n    this.unsubscribe = this.ref.onSnapshot(this.onCollectionUpdate);\n  }\n  authListener(){\n    fire.auth().onAuthStateChanged((user)=>{\n      if(user)\n      {\n        this.setState({user})\n      }\n      else{\n        this.setState({user : null})\n      }\n    })\n  }\n\n  render(){\n    if (this.state.user && fire.auth().currentUser) {\n        //return (<Dashboard/>);\n        return (\n        <div>\n          <Dashboard/>\n          <div>\n            <h3 className='header'>\n              DVD LIST\n            </h3>\n          </div>\n          <div>\n            <h4><Link to=\"/add\">Add New DVD</Link></h4>\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th>Title</th>\n                  <th>Description</th>\n                  <th>Price</th>\n                </tr>\n              </thead>\n              <tbody>\n                {this.state.list.map(dvd =>\n                  <tr>\n                    <td><Link to={`/details/${dvd.key}`}>{dvd.title}</Link></td>\n                    <td>{dvd.description}</td>\n                    <td>{dvd.price}</td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      );\n    }\n    return(\n      <SignIn/>\n    );\n}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}